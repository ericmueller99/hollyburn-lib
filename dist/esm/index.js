!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["hollyburn-Lib"]=t():e["hollyburn-Lib"]=t()}(this,(()=>(()=>{"use strict";var e={n:t=>{var a=t&&t.__esModule?()=>t.default:()=>t;return e.d(a,{a}),a},d:(t,a)=>{for(var r in a)e.o(a,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:a[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{QualifyForm:()=>h});const a=require("react");var r=e.n(a);const n=require("react-datepicker");var l=e.n(n);const m=require("next/image");var o=e.n(m);const s=require("react-hook-form"),i=require("moment");var c=e.n(i);const u=require("axios");var d=e.n(u);const f=require("@heroicons/react/solid");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function v(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,l=[],m=!0,o=!1;try{for(a=a.call(e);!(m=(r=a.next()).done)&&(l.push(r.value),!t||l.length!==t);m=!0);}catch(e){o=!0,n=e}finally{try{m||null==a.return||a.return()}finally{if(o)throw n}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?N(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},g.apply(this,arguments)}function h(e){var t=e.firstName,a=e.lastName,n=e.emailAddress,m=e.phoneNumber,i=e.maxBudget,u=e.moveIn,p=e.numberOfOccupants,y=e.utmCampaign,N=e.utmSource,h=e.utmMedium,E=e.utmContent,x=e.utmTerm,w=e.setFormCompleted,O=[{name:"West End",value:"West End",fieldName:"west-end",inCity:"Vancouver"},{name:"South Granville",value:"South Granville",fieldName:"south-granville",inCity:"Vancouver"},{name:"Kitsilano",value:"Kitsilano",fieldName:"kitsilano",inCity:"Vancouver"},{name:"UBC Point Grey",value:"UBC Point Grey",fieldName:"ubc",inCity:"Vancouver"},{name:"Kerrisdale",value:"Kerrisdale",fieldName:"kerrisdale",inCity:"Vancouver"},{name:"Oakridge",value:"Oakridge",fieldName:"oakridge",inCity:"Vancouver"},{name:"Marpole",value:"Marpole",fieldName:"marpole",inCity:"Vancouver"},{name:"Downtown Toronto",value:"Downtown Toronto",fieldName:"downtown-toronto",inCity:"Toronto"},{name:"The Annex",value:"The Annex",fieldName:"the-annex",inCity:"Toronto"},{name:"Etobicoke",value:"Etobicoke",fieldName:"etobicoke",inCity:"Toronto"},{name:"Yorkville",value:"Yorkville",fieldName:"yorkville",inCity:"Toronto"}];function k(e){var t=e.control,a=(0,s.useWatch)({control:t,name:"cities"});if(a){var n=O.filter((function(e){return a.includes(e.inCity)}));return 0===n.length?"":r().createElement(r().Fragment,null,r().createElement("div",{className:"col-span-2 sm:col-auto"},r().createElement("label",{className:"font-medium text-sm"},"*Interested Neighbourhoods")),r().createElement("div",{className:"col-span-2"},n.map((function(e){return r().createElement("div",{className:"relative inline-flex items-start pr-4",key:e.fieldName},r().createElement("div",{className:"flex items-center h-5"},r().createElement("input",g({id:e.fieldName,type:"checkbox",className:"focus:ring-hbBlue h-4 w-4 text-hbBlue border-gray-300 rounded",value:e.value},C("neighbourhoods",{required:!0})))),r().createElement("div",{className:"ml-3 text-sm"},r().createElement("label",{htmlFor:e.fieldName,className:"font-medium text-gray-700"},e.name)))})),q.neighbourhoods&&r().createElement("p",{className:"text-red-600"},"Please select atleast one neighbourhood")))}return""}var S=(0,s.useForm)(),j=S.control,C=S.register,T=S.handleSubmit,q=S.formState.errors,P=S.setError,F=b(r().useState(!1),2),V=F[0],I=F[1],M=b(r().useState(!1),2),B=M[0],A=M[1],D=b(r().useState(""),2),L=D[0],G=D[1],W="py-3 px-4 block w-full shadow-sm text-gray-900 focus:ring-indigo-500 focus:border-indigo-500 border-gray-300 rounded-md";return r().createElement("div",{className:"py-10 px-6 sm:px-10 lg:col-span-2 xl:p-12"},r().createElement("div",{className:V?"block":"hidden"},r().createElement("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",style:{zIndex:500}},r().createElement(o(),{src:"/images/loading.gif",height:150,width:150,priority:!0})),r().createElement("div",{className:"w-full h-full bg-hbLightGray absolute top-0 left-0 opacity-60 z-40"})),r().createElement("h3",{className:"text-lg font-medium text-gray-900 font-bold"},"Personal Information"),r().createElement("form",{className:"mt-6 grid grid-cols-1 gap-y-6 sm:grid-cols-2 sm:gap-x-8",onSubmit:T((function(e){e=v(v({},e),{},{utmCampaign:y,utmSource:N,utmMedium:h,utmContent:E,utmTerm:x});var t=c()(),a=c()(e.moveIn);a.isValid()?a.diff(t,"year")>2?P("moveIn",{type:"custom",message:"Choose a move-in within 2 years of today."}):V||(A(!1),I(!0),d().post("/api/submit",e).then((function(e){console.log(e),I(!1),w(!0)})).catch((function(e){A(!0),G(e.response.data.errorMessage||"Unknown Error"),I(!1)}))):P("moveIn",{type:"custom",message:"move in date does not appear to be valid"})}))},r().createElement("div",{className:"col-span-2 sm:col-auto"},r().createElement("label",{htmlFor:"first-name",className:"block text-sm font-medium text-gray-900"},"*First Name"),r().createElement("div",{className:"mt-1"},r().createElement("input",g({type:"text"},C("firstName",{required:!0,maxLength:50}),{className:W,value:t})),q.firstName&&r().createElement("p",{className:"text-red-600"},"First name is a required."))),r().createElement("div",{className:"col-span-2 sm:col-auto"},r().createElement("label",{htmlFor:"last-name",className:"block text-sm font-medium text-gray-900"},"*Last Name"),r().createElement("div",{className:"mt-1"},r().createElement("input",g({type:"text"},C("lastName",{required:!0,maxLength:50}),{className:W,value:a})),q.lastName&&r().createElement("p",{className:"text-red-600"},"Last name is required."))),r().createElement("div",{className:"col-span-2 sm:col-auto"},r().createElement("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-900"},"*Email Address"),r().createElement("div",{className:"mt-1"},r().createElement("input",g({type:"email",value:n},C("emailAddress",{pattern:/\S+@\S+\.\S+/,required:!0}),{className:W})),q.emailAddress&&r().createElement("p",{className:"text-red-600"},"Email address is not valid."))),r().createElement("div",{className:"col-span-2 sm:col-auto"},r().createElement("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-900"},"*Phone Number"),r().createElement("div",{className:"mt-1"},r().createElement("input",g({value:m,type:"tel",className:W},C("phoneNumber",{pattern:/^(0|[1-9]\d*)(\.\d+)?$/,required:!0,maxLength:50}))),q.phoneNumber&&r().createElement("p",{className:"text-red-600"},"Valid phone number is required."))),r().createElement("h3",{className:"text-lg font-medium font-bold text-gray-900 col-span-2"},"Preferences"),r().createElement("div",{className:"col-span-2"},r().createElement("label",{className:"font-medium text-sm"},"*Suite Types")),r().createElement("div",{className:"col-span-2"},[{name:"Studio",value:0,fieldName:"suiteType-0"},{name:"1 Bedroom",value:1,fieldName:"suiteType-1"},{name:"2 Bedroom",value:2,fieldName:"suiteType-2"},{name:"3 Bedroom",value:3,fieldName:"suiteType-3"}].map((function(e){return r().createElement("div",{className:"relative inline-flex items-start pr-4",key:e.name},r().createElement("div",{className:"flex items-center h-5"},r().createElement("input",g({id:e.fieldName,name:"suiteTypes",type:"checkbox",className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded",value:e.value},C("suiteTypes",{required:!0})))),r().createElement("div",{className:"ml-3 text-sm"},r().createElement("label",{htmlFor:e.fieldName,className:"font-medium text-gray-700"},e.name)))})),q.suiteTypes&&r().createElement("p",{className:"text-red-600"},"Please select atleast one suite type")),r().createElement("div",{className:"col-span-2 sm:col-auto"},r().createElement("label",{htmlFor:"max-budget",className:"block text-sm font-medium text-gray-900"},"*Maximum Budget"),r().createElement("div",{className:"mt-1"},r().createElement("input",g({value:i,type:"number",className:W},C("maxBudget",{required:!0,max:9999,min:500}))),q.maxBudget&&r().createElement("p",{className:"text-red-600"},"Max budget must be between 500 and 9999"))),r().createElement("div",{className:"col-span-2 sm:col-auto"},r().createElement("label",{htmlFor:"move-in",className:"font-medium text-sm"},"*Desired Move-in Date"),r().createElement("div",{className:"mt-1 datepicker"},r().createElement(s.Controller,{render:function(e){var t=e.field;return r().createElement(l(),{value:u,selected:t.value,onChange:function(e){return t.onChange(e)},dateFormat:"yyyy-MM-dd",className:W,placeholderText:"Select Date"})},name:"moveIn",control:j,rules:{required:!0}}),q.moveIn&&r().createElement("p",{className:"text-red-600"}," ",q.moveIn.message?q.moveIn.message:"Move-in is required.","  "))),r().createElement("div",{className:"col-span-2 sm:col-auto"},r().createElement("label",{className:"font-medium text-sm"},"Pet Friendly Required?"),r().createElement("div",{className:"mt-4"},r().createElement("div",{className:"relative inline-flex items-start pr-4"},r().createElement("div",{className:"flex items-center h-5"},r().createElement("input",g({id:"pet-friendly",name:"pet-friendly",type:"checkbox",className:"focus:ring-indigo-500 h-4 w-4 text-indigo-600 border-gray-300 rounded",value:"Yes"},C("petFriendly")))),r().createElement("div",{className:"ml-3 text-sm"},r().createElement("label",{htmlFor:"pet-friendly",className:"font-medium text-gray-700"},"Yes"))))),r().createElement("div",{className:"col-span-2 sm:col-auto"},r().createElement("label",{htmlFor:"occupants",className:"text-sm font-medium"},"Number Of Occupants"),r().createElement("div",null,r().createElement("select",g({id:"occupants",name:"occupants",defaultValue:p,className:W},C("numberOfOccupants",{required:!0})),[{label:1,value:1},{label:2,value:2},{label:3,value:3},{label:4,value:4},{label:5,value:5}].map((function(e){return r().createElement("option",{key:e.value,value:e.value},e.label)}))),q.numberOfOccupants&&r().createElement("p",{className:"text-red-600"},"Number of occupants is required."))),r().createElement("div",{className:"col-span-2 sm:col-auto"},r().createElement("label",{className:"font-medium text-sm"},"Interested Cities")),r().createElement("div",{className:"col-span-2"},[{name:"Ottawa",value:"Ottawa",fieldName:"city-ottawa"},{name:"Vancouver",value:"Vancouver",fieldName:"city-vancouver"},{name:"Toronto",value:"Toronto",fieldName:"city-toronto"},{name:"Calgary",value:"Calgary",fieldName:"city-calgary"},{name:"West Vancouver",value:"West Vancouver",fieldName:"city-westVancouver"},{name:"North Vancouver",value:"North Vancouver",fieldName:"city-northVancouver"}].map((function(e){return r().createElement("div",{className:"relative inline-flex items-start pr-4",key:e.fieldName},r().createElement("div",{className:"flex items-center h-5"},r().createElement("input",g({id:e.fieldName,type:"checkbox",className:"focus:ring-hbBlue h-4 w-4 text-hbBlue border-gray-300 rounded",value:e.value},C("cities",{required:!0})))),r().createElement("div",{className:"ml-3 text-sm"},r().createElement("label",{htmlFor:e.fieldName,className:"font-medium text-gray-700"},e.name)))})),q.cities&&r().createElement("p",{className:"text-red-600"},"Please select atleast one city")),r().createElement(k,{control:j}),B&&r().createElement("div",{className:"col-span-2"},r().createElement("div",{className:"rounded-md bg-red-400 p-4"},r().createElement("div",{className:"flex"},r().createElement("div",{className:"flex-shrink-0"},r().createElement(f.XCircleIcon,{className:"h-7 w-7 text-white","aria-hidden":"true"})),r().createElement("div",{className:"ml-3 flex-1 md:flex md:justify-between text-center"},r().createElement("p",{className:"text-white"},L))))),r().createElement("div",{className:"sm:col-span-2 sm:flex sm:justify-end"},r().createElement("button",{type:"submit",className:"mt-2 w-full inline-flex items-center justify-center px-6 py-3 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-hbBlue hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:w-auto"},"Submit"))))}return t})()));